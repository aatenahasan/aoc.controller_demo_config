---
- name: Deploy Ansible Automation Controller Seeded Content
  hosts: localhost
  connection: local
  become: false
  gather_facts: false
  tasks:
    - name: Fail if variables not defined
      ansible.builtin.assert:
        that:
          - "{{ lookup('env', 'CONTROLLER_HOST') | length > 0 }}"
          - "{{ lookup('env', 'CONTROLLER_USERNAME') | length > 0 }}"
          - "{{ lookup('env', 'CONTROLLER_PASSWORD') | length > 0 }}"
          - "{{ lookup('env', 'AZURE_TENANT') | length > 0 }}"
          - "{{ lookup('env', 'AZURE_SUBSCRIPTION_ID') | length > 0 }}"
          - "{{ lookup('env', 'AZURE_CLIENT_ID') | length > 0 }}"
          - "{{ lookup('env', 'AZURE_SECRET') | length > 0 }}"
          - "{{ lookup('env', 'RED_HAT_ACCOUNT') | length > 0 }}"
          - "{{ lookup('env', 'RED_HAT_PASSWORD') | length > 0 }}"
        fail_msg: "Required variables not set"

    - name: Start Notice
      ansible.builtin.debug:
        msg: This process will configure Ansible Automation Controller with seeded content.

    - name: Run Controller Configuration Role
      ansible.builtin.import_role:
        name: controller
